# Global settings
global
    log stdout format raw local0

# Default settings
defaults
    mode http
    timeout connect 5s
    timeout client  50s
    timeout server  50s
    option forwardfor

# Frontend configuration for HTTP
frontend http_front
    bind *:80
    mode http
    redirect scheme https code 301 if !{ ssl_fc }

# Frontend configuration for HTTPS
frontend https_front
    bind *:443 ssl crt /etc/ssl/certs/haproxy.pem
    mode http
    default_backend servers

# Backend server configuration
backend servers
    mode http
    balance roundrobin
    server web1 3.90.85.98:80 check
    server web2 3.85.136.123:80 check
